"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/explore/page",{

/***/ "(app-pages-browser)/./src/lib/auth.tsx":
/*!**************************!*\
  !*** ./src/lib/auth.tsx ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthProvider: function() { return /* binding */ AuthProvider; },\n/* harmony export */   useAuth: function() { return /* binding */ useAuth; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _firebase_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/firebase/provider */ \"(app-pages-browser)/./src/firebase/provider.tsx\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase_non_blocking_updates__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/firebase/non-blocking-updates */ \"(app-pages-browser)/./src/firebase/non-blocking-updates.tsx\");\n/* harmony import */ var _hooks_use_toast__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/hooks/use-toast */ \"(app-pages-browser)/./src/hooks/use-toast.ts\");\n/* __next_internal_client_entry_do_not_use__ AuthProvider,useAuth auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n\nconst AuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\nconst AuthProvider = (param)=>{\n    let { children } = param;\n    _s();\n    const { user: firebaseUser, isUserLoading, userError } = (0,_firebase_provider__WEBPACK_IMPORTED_MODULE_2__.useUser)();\n    const { auth, firestore } = (0,_firebase_provider__WEBPACK_IMPORTED_MODULE_2__.useFirebase)();\n    const [user, setUser] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const { toast } = (0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_6__.useToast)();\n    const syncUser = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (fbUser)=>{\n        if (!fbUser) {\n            setUser(null);\n            setLoading(false);\n            return;\n        }\n        setLoading(true);\n        try {\n            const tokenResult = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.getIdTokenResult)(fbUser, true);\n            const role = tokenResult.claims.role || \"Viewer\";\n            const userDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(firestore, \"users\", fbUser.uid);\n            const userDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)(userDocRef);\n            if (userDoc.exists()) {\n                setUser({\n                    uid: fbUser.uid,\n                    ...userDoc.data(),\n                    role\n                });\n            } else {\n                const photoURL = \"https://firebasestorage.googleapis.com/v0/b/studio-3687522943-485ca.firebasestorage.app/o/faceRidepfp.png?alt=media&token=c1ce861e-20f2-4408-b06e-74a80fe13367\";\n                const newUser = {\n                    uid: fbUser.uid,\n                    email: fbUser.email,\n                    role: role,\n                    displayName: fbUser.displayName,\n                    photoURL: fbUser.photoURL || photoURL\n                };\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.setDoc)(userDocRef, newUser);\n                setUser(newUser);\n            }\n        } catch (error) {\n            console.error(\"Error syncing user document:\", error);\n        } finally{\n            setLoading(false);\n        }\n    }, [\n        firestore\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        syncUser(firebaseUser);\n    }, [\n        firebaseUser,\n        syncUser\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!firebaseUser) return;\n        const userDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(firestore, \"users\", firebaseUser.uid);\n        const unsubscribe = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.onSnapshot)(userDocRef, (snapshot)=>{\n            var _snapshot_data;\n            const localRole = user === null || user === void 0 ? void 0 : user.role;\n            const remoteRole = (_snapshot_data = snapshot.data()) === null || _snapshot_data === void 0 ? void 0 : _snapshot_data.role;\n            if (snapshot.exists() && remoteRole && localRole && localRole !== remoteRole) {\n                console.log(\"Detected role change in user document, forcing token refresh.\");\n                syncUser(firebaseUser);\n            }\n        }, (error)=>{\n            console.error(\"Error listening to user document:\", error);\n        });\n        return ()=>unsubscribe();\n    }, [\n        firebaseUser,\n        firestore,\n        syncUser,\n        user\n    ]);\n    const login = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (emailOrUsername, password)=>{\n        let email = emailOrUsername;\n        if (!emailOrUsername.includes(\"@\")) {\n            const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(firestore, \"users\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"displayName\", \"==\", emailOrUsername));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            if (querySnapshot.empty) {\n                throw new Error(\"User not found\");\n            }\n            const userData = querySnapshot.docs[0].data();\n            email = userData.email;\n        }\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signInWithEmailAndPassword)(auth, email, password);\n        } catch (error) {\n            console.error(\"Firebase Login Error:\", error);\n            throw error;\n        }\n    }, [\n        auth,\n        firestore\n    ]);\n    const signup = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (email, password, displayName)=>{\n        const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.createUserWithEmailAndPassword)(auth, email, password);\n        const photoURL = \"https://firebasestorage.googleapis.com/v0/b/studio-3687522943-485ca.firebasestorage.app/o/faceRidepfp.png?alt=media&token=c1ce861e-20f2-4408-b06e-74a80fe13367\";\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updateProfile)(userCredential.user, {\n            displayName,\n            photoURL\n        });\n        await syncUser(userCredential.user);\n    }, [\n        auth,\n        syncUser\n    ]);\n    const logout = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.signOut)(auth);\n            setUser(null);\n        } catch (error) {\n            console.error(\"Error logging out:\", error);\n        }\n    }, [\n        auth\n    ]);\n    const updateUserProfile = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (updates)=>{\n        if (!firebaseUser) throw new Error(\"Not authenticated\");\n        const { displayName, photoURL } = updates;\n        const authUpdates = {};\n        if (displayName !== undefined) authUpdates.displayName = displayName;\n        if (photoURL !== undefined) authUpdates.photoURL = photoURL;\n        await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_3__.updateProfile)(firebaseUser, authUpdates);\n        const userDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(firestore, \"users\", firebaseUser.uid);\n        await (0,_firebase_non_blocking_updates__WEBPACK_IMPORTED_MODULE_5__.updateDocumentNonBlocking)(userDocRef, authUpdates);\n        setUser((prevUser)=>prevUser ? {\n                ...prevUser,\n                ...authUpdates\n            } : null);\n    }, [\n        firebaseUser,\n        firestore\n    ]);\n    const forceRefresh = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        if (firebaseUser) {\n            await syncUser(firebaseUser);\n        }\n    }, [\n        firebaseUser,\n        syncUser\n    ]);\n    const value = {\n        user,\n        loading: loading || isUserLoading,\n        error: userError,\n        login,\n        signup,\n        logout,\n        updateUserProfile,\n        forceRefresh\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(AuthContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/home/user/studio/src/lib/auth.tsx\",\n        lineNumber: 177,\n        columnNumber: 10\n    }, undefined);\n};\n_s(AuthProvider, \"Jmb6YHwll6OCqMvRwVBu9Jb24EE=\", false, function() {\n    return [\n        _firebase_provider__WEBPACK_IMPORTED_MODULE_2__.useUser,\n        _firebase_provider__WEBPACK_IMPORTED_MODULE_2__.useFirebase,\n        _hooks_use_toast__WEBPACK_IMPORTED_MODULE_6__.useToast\n    ];\n});\n_c = AuthProvider;\nconst useAuth = ()=>{\n    _s1();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(AuthContext);\n    if (context === undefined) {\n        throw new Error(\"useAuth must be used within an AuthProvider\");\n    }\n    return context;\n};\n_s1(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2F1dGgudHN4P2Q2YTMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCBSZWFjdE5vZGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VVc2VyLCB1c2VGaXJlYmFzZSB9IGZyb20gJ0AvZmlyZWJhc2UvcHJvdmlkZXInO1xuaW1wb3J0IHtcbiAgVXNlciBhcyBGaXJlYmFzZVVzZXIsXG4gIHNpZ25PdXQsXG4gIHVwZGF0ZVByb2ZpbGUsXG4gIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCxcbiAgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsXG4gIGdldElkVG9rZW5SZXN1bHQsXG59IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xuaW1wb3J0IHsgZG9jLCBnZXREb2MsIHNldERvYywgb25TbmFwc2hvdCwgY29sbGVjdGlvbiwgcXVlcnksIHdoZXJlLCBnZXREb2NzIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IHVwZGF0ZURvY3VtZW50Tm9uQmxvY2tpbmcgfSBmcm9tICdAL2ZpcmViYXNlL25vbi1ibG9ja2luZy11cGRhdGVzJztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnQC9ob29rcy91c2UtdG9hc3QnO1xuXG5leHBvcnQgdHlwZSBVc2VyUm9sZSA9ICdWaWV3ZXInIHwgJ0VkaXRvcicgfCAnQWRtaW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXIge1xuICB1aWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogVXNlclJvbGU7XG4gIHBob3RvVVJMPzogc3RyaW5nIHwgbnVsbDtcbiAgZGlzcGxheU5hbWU/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5pbnRlcmZhY2UgQXV0aENvbnRleHRUeXBlIHtcbiAgdXNlcjogVXNlciB8IG51bGw7XG4gIGxvYWRpbmc6IGJvb2xlYW47XG4gIGVycm9yOiBFcnJvciB8IG51bGw7XG4gIGxvZ2luOiAoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHNpZ251cDogKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIGRpc3BsYXlOYW1lOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIGxvZ291dDogKCkgPT4gdm9pZDtcbiAgdXBkYXRlVXNlclByb2ZpbGU6ICh1cGRhdGVzOiB7IGRpc3BsYXlOYW1lPzogc3RyaW5nOyBwaG90b1VSTD86IHN0cmluZyB9KSA9PiBQcm9taXNlPHZvaWQ+O1xuICBmb3JjZVJlZnJlc2g6ICgpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmNvbnN0IEF1dGhDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxBdXRoQ29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XG5cbmV4cG9ydCBjb25zdCBBdXRoUHJvdmlkZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IHtcbiAgY29uc3QgeyB1c2VyOiBmaXJlYmFzZVVzZXIsIGlzVXNlckxvYWRpbmcsIHVzZXJFcnJvciB9ID0gdXNlVXNlcigpO1xuICBjb25zdCB7IGF1dGgsIGZpcmVzdG9yZSB9ID0gdXNlRmlyZWJhc2UoKTtcbiAgY29uc3QgW3VzZXIsIHNldFVzZXJdID0gdXNlU3RhdGU8VXNlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcblxuICBjb25zdCBzeW5jVXNlciA9IHVzZUNhbGxiYWNrKGFzeW5jIChmYlVzZXI6IEZpcmViYXNlVXNlciB8IG51bGwpID0+IHtcbiAgICBpZiAoIWZiVXNlcikge1xuICAgICAgc2V0VXNlcihudWxsKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRva2VuUmVzdWx0ID0gYXdhaXQgZ2V0SWRUb2tlblJlc3VsdChmYlVzZXIsIHRydWUpO1xuICAgICAgY29uc3Qgcm9sZSA9ICh0b2tlblJlc3VsdC5jbGFpbXMucm9sZSB8fCAnVmlld2VyJykgYXMgVXNlclJvbGU7XG5cbiAgICAgIGNvbnN0IHVzZXJEb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCAndXNlcnMnLCBmYlVzZXIudWlkKTtcbiAgICAgIGNvbnN0IHVzZXJEb2MgPSBhd2FpdCBnZXREb2ModXNlckRvY1JlZik7XG5cbiAgICAgIGlmICh1c2VyRG9jLmV4aXN0cygpKSB7XG4gICAgICAgIHNldFVzZXIoeyB1aWQ6IGZiVXNlci51aWQsIC4uLnVzZXJEb2MuZGF0YSgpLCByb2xlIH0gYXMgVXNlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwaG90b1VSTCA9IFwiaHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9zdHVkaW8tMzY4NzUyMjk0My00ODVjYS5maXJlYmFzZXN0b3JhZ2UuYXBwL28vZmFjZVJpZGVwZnAucG5nP2FsdD1tZWRpYSZ0b2tlbj1jMWNlODYxZS0yMGYyLTQ0MDgtYjA2ZS03NGE4MGZlMTMzNjdcIjtcbiAgICAgICAgY29uc3QgbmV3VXNlcjogVXNlciA9IHtcbiAgICAgICAgICB1aWQ6IGZiVXNlci51aWQsXG4gICAgICAgICAgZW1haWw6IGZiVXNlci5lbWFpbCEsXG4gICAgICAgICAgcm9sZTogcm9sZSxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogZmJVc2VyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHBob3RvVVJMOiBmYlVzZXIucGhvdG9VUkwgfHwgcGhvdG9VUkwsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHNldERvYyh1c2VyRG9jUmVmLCBuZXdVc2VyKTtcbiAgICAgICAgc2V0VXNlcihuZXdVc2VyKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHN5bmNpbmcgdXNlciBkb2N1bWVudDpcIiwgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtmaXJlc3RvcmVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHN5bmNVc2VyKGZpcmViYXNlVXNlcik7XG4gIH0sIFtmaXJlYmFzZVVzZXIsIHN5bmNVc2VyXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWZpcmViYXNlVXNlcikgcmV0dXJuO1xuXG4gICAgY29uc3QgdXNlckRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsICd1c2VycycsIGZpcmViYXNlVXNlci51aWQpO1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25TbmFwc2hvdCh1c2VyRG9jUmVmLCAoc25hcHNob3QpID0+IHtcbiAgICAgIGNvbnN0IGxvY2FsUm9sZSA9IHVzZXI/LnJvbGU7XG4gICAgICBjb25zdCByZW1vdGVSb2xlID0gc25hcHNob3QuZGF0YSgpPy5yb2xlO1xuXG4gICAgICBpZiAoc25hcHNob3QuZXhpc3RzKCkgJiYgcmVtb3RlUm9sZSAmJiBsb2NhbFJvbGUgJiYgbG9jYWxSb2xlICE9PSByZW1vdGVSb2xlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRGV0ZWN0ZWQgcm9sZSBjaGFuZ2UgaW4gdXNlciBkb2N1bWVudCwgZm9yY2luZyB0b2tlbiByZWZyZXNoLlwiKTtcbiAgICAgICAgc3luY1VzZXIoZmlyZWJhc2VVc2VyKTtcbiAgICAgIH1cbiAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBsaXN0ZW5pbmcgdG8gdXNlciBkb2N1bWVudDpcIiwgZXJyb3IpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHVuc3Vic2NyaWJlKCk7XG4gIH0sIFtmaXJlYmFzZVVzZXIsIGZpcmVzdG9yZSwgc3luY1VzZXIsIHVzZXJdKTtcblxuICBjb25zdCBsb2dpbiA9IHVzZUNhbGxiYWNrKGFzeW5jIChlbWFpbE9yVXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4ge1xuICAgIGxldCBlbWFpbCA9IGVtYWlsT3JVc2VybmFtZTtcbiAgICBpZiAoIWVtYWlsT3JVc2VybmFtZS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZmlyZXN0b3JlLCAndXNlcnMnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeSh1c2Vyc1JlZiwgd2hlcmUoJ2Rpc3BsYXlOYW1lJywgJz09JywgZW1haWxPclVzZXJuYW1lKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXS5kYXRhKCk7XG4gICAgICBlbWFpbCA9IHVzZXJEYXRhLmVtYWlsO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmlyZWJhc2UgTG9naW4gRXJyb3I6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSwgW2F1dGgsIGZpcmVzdG9yZV0pO1xuXG4gIGNvbnN0IHNpZ251cCA9IHVzZUNhbGxiYWNrKGFzeW5jIChlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nLCBkaXNwbGF5TmFtZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcbiAgICBjb25zdCBwaG90b1VSTCA9IFwiaHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9zdHVkaW8tMzY4NzUyMjk0My00ODVjYS5maXJlYmFzZXN0b3JhZ2UuYXBwL28vZmFjZVJpZGVwZnAucG5nP2FsdD1tZWRpYSZ0b2tlbj1jMWNlODYxZS0yMGYyLTQ0MDgtYjA2ZS03NGE4MGZlMTMzNjdcIjtcbiAgICBhd2FpdCB1cGRhdGVQcm9maWxlKHVzZXJDcmVkZW50aWFsLnVzZXIsIHsgZGlzcGxheU5hbWUsIHBob3RvVVJMIH0pO1xuICAgIGF3YWl0IHN5bmNVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xuICB9LCBbYXV0aCwgc3luY1VzZXJdKTtcblxuICBjb25zdCBsb2dvdXQgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHNpZ25PdXQoYXV0aCk7XG4gICAgICBzZXRVc2VyKG51bGwpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9nZ2luZyBvdXQ6XCIsIGVycm9yKTtcbiAgICB9XG4gIH0sIFthdXRoXSk7XG5cbiAgY29uc3QgdXBkYXRlVXNlclByb2ZpbGUgPSB1c2VDYWxsYmFjayhhc3luYyAodXBkYXRlczogeyBkaXNwbGF5TmFtZT86IHN0cmluZzsgcGhvdG9VUkw/OiBzdHJpbmcgfSkgPT4ge1xuICAgIGlmICghZmlyZWJhc2VVc2VyKSB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgYXV0aGVudGljYXRlZFwiKTtcblxuICAgIGNvbnN0IHsgZGlzcGxheU5hbWUsIHBob3RvVVJMIH0gPSB1cGRhdGVzO1xuICAgIGNvbnN0IGF1dGhVcGRhdGVzOiB7IGRpc3BsYXlOYW1lPzogc3RyaW5nOyBwaG90b1VSTD86IHN0cmluZyB9ID0ge307XG4gICAgaWYgKGRpc3BsYXlOYW1lICE9PSB1bmRlZmluZWQpIGF1dGhVcGRhdGVzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gICAgaWYgKHBob3RvVVJMICE9PSB1bmRlZmluZWQpIGF1dGhVcGRhdGVzLnBob3RvVVJMID0gcGhvdG9VUkw7XG5cbiAgICBhd2FpdCB1cGRhdGVQcm9maWxlKGZpcmViYXNlVXNlciwgYXV0aFVwZGF0ZXMpO1xuICAgIGNvbnN0IHVzZXJEb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCAndXNlcnMnLCBmaXJlYmFzZVVzZXIudWlkKTtcbiAgICBhd2FpdCB1cGRhdGVEb2N1bWVudE5vbkJsb2NraW5nKHVzZXJEb2NSZWYsIGF1dGhVcGRhdGVzKTtcbiAgICBzZXRVc2VyKHByZXZVc2VyID0+IHByZXZVc2VyID8geyAuLi5wcmV2VXNlciwgLi4uYXV0aFVwZGF0ZXMgfSA6IG51bGwpO1xuICB9LCBbZmlyZWJhc2VVc2VyLCBmaXJlc3RvcmVdKTtcblxuICBjb25zdCBmb3JjZVJlZnJlc2ggPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKGZpcmViYXNlVXNlcikge1xuICAgICAgYXdhaXQgc3luY1VzZXIoZmlyZWJhc2VVc2VyKTtcbiAgICB9XG4gIH0sIFtmaXJlYmFzZVVzZXIsIHN5bmNVc2VyXSk7XG5cbiAgY29uc3QgdmFsdWUgPSB7XG4gICAgdXNlcixcbiAgICBsb2FkaW5nOiBsb2FkaW5nIHx8IGlzVXNlckxvYWRpbmcsXG4gICAgZXJyb3I6IHVzZXJFcnJvcixcbiAgICBsb2dpbixcbiAgICBzaWdudXAsXG4gICAgbG9nb3V0LFxuICAgIHVwZGF0ZVVzZXJQcm9maWxlLFxuICAgIGZvcmNlUmVmcmVzaCxcbiAgfTtcblxuICByZXR1cm4gPEF1dGhDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2YWx1ZX0+e2NoaWxkcmVufTwvQXV0aENvbnRleHQuUHJvdmlkZXI+O1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KEF1dGhDb250ZXh0KTtcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXNlQXV0aCBtdXN0IGJlIHVzZWQgd2l0aGluIGFuIEF1dGhQcm92aWRlcicpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsImNyZWF0ZUNvbnRleHQiLCJ1c2VDb250ZXh0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsInVzZVVzZXIiLCJ1c2VGaXJlYmFzZSIsInNpZ25PdXQiLCJ1cGRhdGVQcm9maWxlIiwiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJnZXRJZFRva2VuUmVzdWx0IiwiZG9jIiwiZ2V0RG9jIiwic2V0RG9jIiwib25TbmFwc2hvdCIsImNvbGxlY3Rpb24iLCJxdWVyeSIsIndoZXJlIiwiZ2V0RG9jcyIsInVwZGF0ZURvY3VtZW50Tm9uQmxvY2tpbmciLCJ1c2VUb2FzdCIsIkF1dGhDb250ZXh0IiwidW5kZWZpbmVkIiwiQXV0aFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJ1c2VyIiwiZmlyZWJhc2VVc2VyIiwiaXNVc2VyTG9hZGluZyIsInVzZXJFcnJvciIsImF1dGgiLCJmaXJlc3RvcmUiLCJzZXRVc2VyIiwibG9hZGluZyIsInNldExvYWRpbmciLCJ0b2FzdCIsInN5bmNVc2VyIiwiZmJVc2VyIiwidG9rZW5SZXN1bHQiLCJyb2xlIiwiY2xhaW1zIiwidXNlckRvY1JlZiIsInVpZCIsInVzZXJEb2MiLCJleGlzdHMiLCJkYXRhIiwicGhvdG9VUkwiLCJuZXdVc2VyIiwiZW1haWwiLCJkaXNwbGF5TmFtZSIsImVycm9yIiwiY29uc29sZSIsInVuc3Vic2NyaWJlIiwic25hcHNob3QiLCJsb2NhbFJvbGUiLCJyZW1vdGVSb2xlIiwibG9nIiwibG9naW4iLCJlbWFpbE9yVXNlcm5hbWUiLCJwYXNzd29yZCIsImluY2x1ZGVzIiwidXNlcnNSZWYiLCJxIiwicXVlcnlTbmFwc2hvdCIsImVtcHR5IiwiRXJyb3IiLCJ1c2VyRGF0YSIsImRvY3MiLCJzaWdudXAiLCJ1c2VyQ3JlZGVudGlhbCIsImxvZ291dCIsInVwZGF0ZVVzZXJQcm9maWxlIiwidXBkYXRlcyIsImF1dGhVcGRhdGVzIiwicHJldlVzZXIiLCJmb3JjZVJlZnJlc2giLCJ2YWx1ZSIsIlByb3ZpZGVyIiwidXNlQXV0aCIsImNvbnRleHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/auth.tsx\n"));

/***/ })

});