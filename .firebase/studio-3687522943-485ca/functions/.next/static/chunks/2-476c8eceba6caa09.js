"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{8910:function(e,t,n){n.d(t,{$:function(){return Z}});var a=n(7437),r=n(9343),s=n(1014),i=n(537),l=n(6463),o=n(1471),d=n(2265),c=n(6648),u=n(3363),m=n(7209),f=n(9733),h=n(6763),p=n(1421),x=n(9842),g=n(9856),y=n(2874),b=n(2011),j=n(8087),v=n(5208),N=n(9847),w=n(1617),C=n(9943),k=n(402),E=n(6505);async function T(e){let t=await fetch("/api/gemini",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})});if(!t.ok){let e=await t.json();throw console.error("API Error:",e),Error(e.message||"Failed to fetch AI content.")}if(!t.body)throw Error("Response body is null");return t.body}n(9837);let R=()=>{let{toast:e}=(0,h.pm)(),[t,n]=(0,d.useState)(""),[a,r]=(0,d.useState)(!1),[s,i]=(0,d.useState)(""),l=async()=>{if(!t){e({title:"Prompt is empty",description:"Please enter a prompt to generate content.",variant:"destructive"});return}r(!0),i("");try{let e=(await T("\nYou are a wiki editor. Generate a comprehensive, encyclopedia-style entry based on the user's topic.\nThe tone should be informative, slightly formal, but engaging.\n\n**IMPORTANT FORMATTING RULES:**\n1.  **Structure:** The output MUST be formatted with HTML. Start with an introductory paragraph. Then, use subheadings for different sections to organize the content logically.\n2.  **Paragraphs:** Enclose every paragraph in <p>...</p> tags. Ensure there is a newline character between each closing </p> and the next opening <p> or <h3> tag for readability.\n3.  **Subheadings:** Use <h3>...</h3> for all section titles. For example: <h3>Key Features</h3>.\n4.  **Bolding:** Use <b>...</b> for emphasis on key terms within paragraphs, not for headings.\n5.  **NO OTHER HTML:** Do not use any other HTML tags like <ul>, <li>, <h1>, <h2>, or markdown like #, *, -.\n\n**EXAMPLE OUTPUT:**\n<p>The Vortex Coaster is a marvel of modern engineering, pushing the boundaries of what's possible in a thrill ride. It was designed to simulate a journey through a wormhole.</p>\n\n<h3>Design Philosophy</h3>\n<p>Designed by the legendary engineer Dr. Aris Thorne, the Vortex was conceived with a focus on delivering a disorienting yet thrilling experience. The track features a record-breaking 7 inversions, including a zero-g stall and a double-helix corkscrew finale.</p>\n\n<h3>Key Features</h3>\n<p>The ride boasts a top speed of <b>85 mph</b> and a maximum height of <b>210 feet</b>. Its most unique element is the 'Chrono-Inversion,' a slow-motion heartline roll that provides a profound feeling of weightlessness.</p>\n\n**GENERATE ENTRY FOR TOPIC:** \"".concat(t,'"\n        '))).getReader(),n=new TextDecoder;for(;;){let{value:t,done:a}=await e.read();if(a)break;let r=n.decode(t,{stream:!0});i(e=>e+r)}}catch(t){console.error("Error generating content:",t),e({title:"Error Generating Content",description:t.message||"There was a problem generating content. Please check your API key and try again.",variant:"destructive"})}finally{r(!1)}};return{prompt:t,setPrompt:n,isGenerating:a,generatedContent:s,setGeneratedContent:i,generate:l}};var I=n(4662),S=n(1557),z=n(8411),F=n(7629);let D=d.forwardRef((e,t)=>{let{value:n,onChange:r,actions:s,...i}=e,l=(0,d.useRef)(null),[o,c]=(0,d.useState)(!1),[u,m]=(0,d.useState)(!1),[h,p]=(0,d.useState)(!1);(0,d.useEffect)(()=>{l.current&&n!==l.current.innerHTML&&(l.current.innerHTML=n)},[n]);let x=()=>{c(document.queryCommandState("bold")),m(document.queryCommandState("italic")),p(document.queryCommandState("underline"))};(0,d.useEffect)(()=>{let e=()=>{var e,t;(null===(t=l.current)||void 0===t?void 0:t.contains((null===(e=document.getSelection())||void 0===e?void 0:e.anchorNode)||null))&&x()};return document.addEventListener("selectionchange",e),()=>document.removeEventListener("selectionchange",e)},[]);let g=e=>{var t;null===(t=l.current)||void 0===t||t.focus(),document.execCommand(e,!1),l.current&&(r(l.current.innerHTML),x())};return(0,a.jsxs)("div",{className:"rounded-md border border-input bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b p-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.z,{type:"button",variant:o?"secondary":"outline",size:"sm",onMouseDown:e=>{e.preventDefault(),g("bold")},title:"Bold",children:(0,a.jsx)(S.Z,{className:"h-4 w-4"})}),(0,a.jsx)(f.z,{type:"button",variant:u?"secondary":"outline",size:"sm",onMouseDown:e=>{e.preventDefault(),g("italic")},title:"Italic",children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})}),(0,a.jsx)(f.z,{type:"button",variant:h?"secondary":"outline",size:"sm",onMouseDown:e=>{e.preventDefault(),g("underline")},title:"Underline",children:(0,a.jsx)(F.Z,{className:"h-4 w-4"})})]}),s]}),(0,a.jsx)("div",{ref:e=>{l.current=e,"function"==typeof t?t(e):t&&(t.current=e)},contentEditable:!0,suppressContentEditableWarning:!0,onInput:e=>{r(e.target.innerHTML)},onMouseUp:x,onKeyUp:x,className:"prose-base md:prose-lg dark:prose-invert max-w-none font-body text-foreground/90 whitespace-pre-wrap min-h-[400px] resize-y p-4 focus-visible:outline-none",...i})]})});D.displayName="RichTextEditor";var L=n(9354);let U=d.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("textarea",{className:(0,L.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...r})});U.displayName="Textarea";let A=i.Ry({title:i.Z_().min(3,"Title is required and must be at least 3 characters."),tags:i.Z_().min(3,"At least one tag is required."),content:i.Z_()}),M=16/9;async function _(e,t){let n=document.createElement("canvas"),a=e.naturalWidth/e.width,r=e.naturalHeight/e.height;n.width=Math.floor(t.width*a),n.height=Math.floor(t.height*r);let s=n.getContext("2d");if(!s)throw Error("No 2d context");return s.drawImage(e,t.x*a,t.y*r,t.width*a,t.height*r,0,0,n.width,n.height),new Promise((e,t)=>{n.toBlob(n=>{if(!n){t(Error("Canvas is empty"));return}e(n)},"image/jpeg")})}function Z(e){var t;let{article:n}=e,i=(0,l.useRouter)(),{user:T}=(0,o.a)(),{toast:S}=(0,h.pm)(),{firestore:z}=(0,g.f2)(),[F,L]=(0,d.useState)(!1),[Z,P]=(0,d.useState)((null==n?void 0:n.imageUrl)||""),[V,H]=(0,d.useState)(""),[O,B]=(0,d.useState)(null),[G,J]=(0,d.useState)(!1),[Y,q]=(0,d.useState)(!1),[$,W]=(0,d.useState)(!1),[X,K]=(0,d.useState)(),[Q,ee]=(0,d.useState)(null),et=(0,d.useRef)(null),[en,ea]=(0,d.useState)(!1),{prompt:er,setPrompt:es,isGenerating:ei,generatedContent:el,generate:eo}=R(),ed=(0,r.cI)({resolver:(0,s.F)(A),defaultValues:{title:(null==n?void 0:n.title)||"",tags:(null==n?void 0:null===(t=n.tags)||void 0===t?void 0:t.join(", "))||"",content:(null==n?void 0:n.content)||""}}),ec=T&&n&&("Admin"===T.role||"Editor"===T.role&&n.authorId===T.uid),eu=e=>{if(e.target.files&&e.target.files.length>0){K(void 0);let t=new FileReader;t.addEventListener("load",()=>{var e;H((null===(e=t.result)||void 0===e?void 0:e.toString())||""),q(!0)}),t.readAsDataURL(e.target.files[0]),e.target.value=""}},em=async()=>{if(ec&&n){L(!0);try{await (0,p.cz)((0,x.JU)(z,"wiki_pages",n.id)),S({title:"Entry Deleted",description:'"'.concat(n.title,'" has been permanently deleted.')}),i.push("/"),i.refresh()}catch(e){console.error("Delete error:",e),S({title:"Delete Failed",variant:"destructive"}),L(!1)}}};async function ef(e){if(!T){S({title:"Authentication Error",description:"You must be logged in to save an entry.",variant:"destructive"});return}L(!0);try{let t={...e,tags:e.tags.split(",").map(e=>e.trim()),updatedAt:(0,x.Bt)(),imageUrl:Z,lastEditorId:T.uid,lastEditorDisplayName:T.displayName||T.email,lastEditorPhotoURL:T.photoURL||null};if(n){let a=(0,x.JU)(z,"wiki_pages",n.id);await (0,p.lf)(a,t),S({title:"Entry Updated",description:'"'.concat(e.title,'" has been saved.')}),i.push("/article/".concat(n.id))}else{let n=(0,x.JU)((0,x.hJ)(z,"wiki_pages"));await (0,p.fN)(n,{...t,id:n.id,createdAt:(0,x.Bt)(),authorId:T.uid,authorDisplayName:T.displayName||T.email,authorPhotoURL:T.photoURL||null},{}),S({title:"Entry Created",description:'"'.concat(e.title,'" has been created.')}),i.push("/article/".concat(n.id))}}catch(e){console.error("Submission error:",e),S({title:"Submission Failed",variant:"destructive"})}finally{L(!1),i.refresh()}}let eh=async()=>{if(Q&&et.current){W(!0),B(0);try{let e=await _(et.current,Q),t="header-".concat(Date.now(),".jpg"),n=new File([e],t,{type:"image/jpeg"}),a=await (0,y.c)(n,"wiki-headers",B);P(a),S({title:"Image updated successfully!"})}catch(e){console.error("Cropping/upload failed:",e),S({title:"Upload Failed",description:String(e),variant:"destructive"})}finally{W(!1),B(null),q(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.aR,{open:G,onOpenChange:J,children:(0,a.jsxs)(C._T,{children:[(0,a.jsxs)(C.fY,{children:[(0,a.jsx)(C.f$,{children:"Are you sure?"}),(0,a.jsxs)(C.yT,{children:['This will permanently delete the entry "',null==n?void 0:n.title,'". This action cannot be undone.']})]}),(0,a.jsxs)(C.xo,{children:[(0,a.jsx)(C.le,{children:"Cancel"}),(0,a.jsx)(C.OL,{onClick:em,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Yes, delete it"})]})]})}),(0,a.jsx)(I.Vq,{open:en,onOpenChange:ea,children:(0,a.jsxs)(I.cZ,{className:"max-w-2xl",children:[(0,a.jsxs)(I.fK,{children:[(0,a.jsxs)(I.$N,{className:"flex items-center",children:[(0,a.jsx)(b.Z,{className:"mr-2 h-5 w-5 text-primary"})," AI Content Assistant"]}),(0,a.jsx)(I.Be,{children:"Enter a prompt to generate or enhance the article content. The AI will provide a suggestion that you can insert into the editor."})]}),(0,a.jsxs)("div",{className:"py-4 space-y-4",children:[(0,a.jsx)(U,{placeholder:"e.g., 'Write a short introduction about the history of our company' or 'Make the following paragraph more professional...'",value:er,onChange:e=>es(e.target.value),rows:4}),(0,a.jsxs)(f.z,{onClick:eo,disabled:ei||!er,children:[ei?(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Generate Content"]}),el&&(0,a.jsxs)("div",{className:"p-4 border rounded-md bg-muted max-h-64 overflow-y-auto",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"AI Suggestion:"}),(0,a.jsx)("div",{className:"text-sm prose-base dark:prose-invert",dangerouslySetInnerHTML:{__html:el}})]})]}),(0,a.jsxs)(I.cN,{children:[(0,a.jsx)(f.z,{variant:"outline",onClick:()=>ea(!1),children:"Cancel"}),(0,a.jsx)(f.z,{onClick:()=>{if(el){let e=ed.getValues("content");ed.setValue("content",e?"".concat(e,"<br>").concat(el):el,{shouldDirty:!0,shouldValidate:!0}),S({title:"Content Inserted",description:"The AI-generated content has been added to the editor."})}ea(!1)},disabled:!el,children:"Insert into Editor"})]})]})}),(0,a.jsx)(I.Vq,{open:Y,onOpenChange:q,children:(0,a.jsxs)(I.cZ,{className:"max-w-3xl",children:[(0,a.jsx)(I.fK,{children:(0,a.jsx)(I.$N,{children:"Crop Header Image"})}),(0,a.jsx)("div",{className:"flex justify-center bg-muted p-4",children:V?(0,a.jsx)(E.ZP,{crop:X,onChange:e=>K(e),onComplete:e=>ee(e),aspect:M,className:"max-w-full",children:(0,a.jsx)(c.default,{ref:et,src:V,alt:"Crop preview",width:800,height:450,style:{maxHeight:"70vh",objectFit:"contain"},onLoad:function(e){et.current=e.currentTarget;let{width:t,height:n}=e.currentTarget;K((0,E._H)((0,E.YG)({unit:"%",width:90},M,t,n),t,n))}})}):(0,a.jsx)("p",{children:"Loading..."})}),$&&(0,a.jsx)(w.E,{value:O,className:"w-full"}),(0,a.jsxs)(I.cN,{children:[(0,a.jsx)(f.z,{variant:"outline",onClick:()=>q(!1),disabled:$,children:"Cancel"}),(0,a.jsxs)(f.z,{onClick:eh,disabled:!Q||$,children:[$?(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Save Crop"]})]})]})}),(0,a.jsx)(u.l0,{...ed,children:(0,a.jsxs)("form",{onSubmit:ed.handleSubmit(ef),className:"space-y-8 max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:n?"Edit Entry":"Create New Entry"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(f.z,{type:"button",variant:"outline",onClick:()=>i.back(),children:"Cancel"}),(0,a.jsx)(f.z,{type:"submit",disabled:F,children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]}),(0,a.jsx)(u.Wi,{control:ed.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{children:[(0,a.jsx)(u.lX,{className:"text-lg",children:"Title"}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(m.I,{placeholder:"e.g., Big Mike's Signature Move, Face Smashing, The Boston Cradle",...t})}),(0,a.jsx)(u.zG,{})]})}}),(0,a.jsx)(u.Wi,{control:ed.control,name:"tags",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{children:[(0,a.jsx)(u.lX,{className:"text-lg",children:"Tags"}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(m.I,{placeholder:"e.g., Techniques, Theories, Long Ride",...t})}),(0,a.jsx)(u.zG,{})]})}}),(0,a.jsxs)(u.xJ,{children:[(0,a.jsx)(u.lX,{className:"text-lg",children:"Header Image"}),(0,a.jsx)("div",{className:"relative group w-full min-h-[250px] border-2 border-dashed rounded-lg flex items-center justify-center bg-muted overflow-hidden",children:Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.default,{src:Z,alt:ed.getValues("title")||"Header image",fill:!0,style:{objectFit:"cover"}}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(m.I,{id:"image-upload-input",type:"file",accept:"image/*",onChange:eu,className:"hidden"}),(0,a.jsxs)(k._,{htmlFor:"image-upload-input",className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 py-2 cursor-pointer",children:[(0,a.jsx)(v.Z,{className:"mr-2 h-4 w-4"})," Change Image"]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.I,{id:"image-upload-input",type:"file",accept:"image/*",onChange:eu,className:"hidden"}),(0,a.jsx)(k._,{htmlFor:"image-upload-input",className:"cursor-pointer text-primary hover:underline",children:"Click to add a header image"})]})}),Z&&(0,a.jsx)("div",{className:"text-right mt-1",children:(0,a.jsx)(f.z,{type:"button",variant:"link",size:"sm",className:"text-destructive",onClick:()=>{P("")},children:"Remove Image"})})]}),(0,a.jsx)(u.Wi,{control:ed.control,name:"content",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{children:[(0,a.jsx)(u.lX,{className:"text-lg",children:"Content"}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(D,{...t,actions:(0,a.jsxs)(f.z,{type:"button",variant:"outline",size:"sm",onClick:()=>ea(!0),children:[(0,a.jsx)(b.Z,{className:"mr-2 h-4 w-4 text-primary"}),"AI Assistant"]})})}),(0,a.jsx)(u.zG,{})]})}}),n&&ec&&(0,a.jsxs)("div",{className:"flex justify-between items-center pt-8 border-t border-destructive/20",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg text-destructive",children:"Danger Zone"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Deleting an entry is a permanent action."})]}),(0,a.jsxs)(f.z,{type:"button",variant:"destructive",onClick:()=>J(!0),disabled:F,children:[(0,a.jsx)(N.Z,{className:"mr-2 h-4 w-4"})," Delete Entry"]})]})]})})]})}},9943:function(e,t,n){n.d(t,{OL:function(){return x},_T:function(){return u},aR:function(){return o},f$:function(){return h},fY:function(){return m},le:function(){return g},xo:function(){return f},yT:function(){return p}});var a=n(7437),r=n(2265),s=n(9546),i=n(9354),l=n(9733);let o=s.fC;s.xz;let d=s.h_,c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r,ref:t})});c.displayName=s.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsx)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...r})]})});u.displayName=s.VY.displayName;let m=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};m.displayName="AlertDialogHeader";let f=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};f.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold",n),...r})});h.displayName=s.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...r})});p.displayName=s.dk.displayName;let x=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.aU,{ref:t,className:(0,i.cn)((0,l.d)(),n),...r})});x.displayName=s.aU.displayName;let g=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.$j,{ref:t,className:(0,i.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...r})});g.displayName=s.$j.displayName},4662:function(e,t,n){n.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return o},cN:function(){return f},cZ:function(){return u},fK:function(){return m}});var a=n(7437),r=n(2265),s=n(2226),i=n(4732),l=n(9354);let o=s.fC;s.xz;let d=s.h_;s.x8;let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r})});c.displayName=s.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:n,children:r,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...o,children:[r,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let m=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};m.displayName="DialogHeader";let f=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};f.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",n),...r})});h.displayName=s.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...r})});p.displayName=s.dk.displayName},3363:function(e,t,n){n.d(t,{NI:function(){return x},Wi:function(){return u},l0:function(){return d},lX:function(){return p},xJ:function(){return h},zG:function(){return g}});var a=n(7437),r=n(2265),s=n(1538),i=n(9343),l=n(9354),o=n(402);let d=i.RV,c=r.createContext({}),u=e=>{let{...t}=e;return(0,a.jsx)(c.Provider,{value:{name:t.name},children:(0,a.jsx)(i.Qr,{...t})})},m=()=>{let e=r.useContext(c),t=r.useContext(f),{getFieldState:n,formState:a}=(0,i.Gc)(),s=n(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...s}},f=r.createContext({}),h=r.forwardRef((e,t)=>{let{className:n,...s}=e,i=r.useId();return(0,a.jsx)(f.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",n),...s})})});h.displayName="FormItem";let p=r.forwardRef((e,t)=>{let{className:n,...r}=e,{error:s,formItemId:i}=m();return(0,a.jsx)(o._,{ref:t,className:(0,l.cn)(s&&"text-destructive",n),htmlFor:i,...r})});p.displayName="FormLabel";let x=r.forwardRef((e,t)=>{let{...n}=e,{error:r,formItemId:i,formDescriptionId:l,formMessageId:o}=m();return(0,a.jsx)(s.g7,{ref:t,id:i,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...n})});x.displayName="FormControl",r.forwardRef((e,t)=>{let{className:n,...r}=e,{formDescriptionId:s}=m();return(0,a.jsx)("p",{ref:t,id:s,className:(0,l.cn)("text-sm text-muted-foreground",n),...r})}).displayName="FormDescription";let g=r.forwardRef((e,t)=>{var n;let{className:r,children:s,...i}=e,{error:o,formMessageId:d}=m(),c=o?String(null!==(n=null==o?void 0:o.message)&&void 0!==n?n:""):s;return c?(0,a.jsx)("p",{ref:t,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",r),...i,children:c}):null});g.displayName="FormMessage"},7209:function(e,t,n){n.d(t,{I:function(){return i}});var a=n(7437),r=n(2265),s=n(9354);let i=r.forwardRef((e,t)=>{let{className:n,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...i})});i.displayName="Input"},402:function(e,t,n){n.d(t,{_:function(){return d}});var a=n(7437),r=n(2265),s=n(8837),i=n(3027),l=n(9354);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,l.cn)(o(),n),...r})});d.displayName=s.f.displayName},1617:function(e,t,n){n.d(t,{E:function(){return l}});var a=n(7437),r=n(2265),s=n(3993),i=n(9354);let l=r.forwardRef((e,t)=>{let{className:n,value:r,...l}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...l,children:(0,a.jsx)(s.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=s.fC.displayName},2935:function(e,t,n){n.d(t,{k:function(){return l}});var a=n(2265),r=n(9842),s=n(5606),i=n(9558);function l(e){let[t,n]=(0,a.useState)(null),[l,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){n(null),o(!1),c(null);return}o(!0),c(null),n(null);let t=(0,r.cf)(e,e=>{e.exists()?n({...e.data(),id:e.id}):n(null),c(null),o(!1)},t=>{let a=new i.b({operation:"get",path:e.path});c(a),n(null),o(!1),s.s.emit("permission-error",a)});return()=>t()},[e]),{data:t,isLoading:l,error:d}}},2874:function(e,t,n){n.d(t,{c:function(){return i}});var a=n(9854),r=n(920),s=n(4334);let i=(e,t,n)=>new Promise((i,l)=>{if(!e)return l(Error("No file provided for upload."));let o=(0,a.cF)(s.l2),d="".concat((0,r.Z)(),"-").concat(e.name),c=(0,a.iH)(o,"".concat(t,"/").concat(d)),u=(0,a.B0)(c,e);u.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;n&&n(t)},e=>{console.error("Error uploading file:",e),l(Error("File upload failed."))},async()=>{try{let e=await (0,a.Jt)(u.snapshot.ref);i(e)}catch(e){console.error("Error getting download URL:",e),l(Error("Could not get file download URL."))}})})}}]);